# INT-13 OS –ñ—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç—ã. –ù–∞—Å–∏–±—É–ª–ª–∏–Ω–∞ –ò–ª—å—Å–∏—è

# –í–≤–µ–¥–µ–Ω–∏–µ

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–¶–µ–ª—å—é –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª—è —è–¥—Ä–∞ Linux –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã procfs. –î—Ä–∞–π–≤–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, —á–∏—Ç–∞—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.

## –ó–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —è –ø–æ—Å—Ç—Ä–æ–∏–ª–∞ –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã:

1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–µ–º—ã –∏ –ø–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π
2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–¥—É–ª—è —è–¥—Ä–∞
    1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ procfs
    2. –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å–∏
    3. –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è
    4. –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è
3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ Makefile –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–∞
4. –ù–∞–ø–∏—Å–∞–Ω–∏–µ user-space –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º
5. –°–±–æ—Ä–∫–∞ —è–¥—Ä–∞ —Å –Ω–æ–≤—ã–º –º–æ–¥—É–ª–µ–º –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ KASAN
6. –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ

–ü–æ–º–∏–º–æ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ —è –±—É–¥—É –≤–µ—Å—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ Github —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –∫–æ–º–º–∏—Ç–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫ –Ω–∏–º.

# –ü—Ä–∞–∫—Ç–∏–∫–∞

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–µ–º—ã –∏ –ø–æ–∏—Å–∫ —Å—Ç–∞—Ç–µ–π

–î–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–¥–µ–∏ —Ä–µ—à–µ–Ω–∏—è —è –∏–∑—É—á–∏–ª–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ç–µ–π. –ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥—É–ª—è —è–¥—Ä–∞ –º–Ω–µ –ø–æ–º–æ–≥–ª–∏ —ç—Ç–∏ —Å—Ç–∞—Ç—å–∏:

https://habr.com/ru/articles/343828/

https://habr.com/ru/companies/timeweb/articles/680850/

–î–∞–ª–µ–µ —è –∏–∑—É—á–∏–ª–∞ —Å—Ç–∞—Ç—å–∏, –ø–æ—Å–≤—è—â–µ–Ω–Ω—ã–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ procfs. –°—Ä–µ–¥–∏ –Ω–∏—Ö –Ω–∞–∏–±–æ–ª—å—à—É—é –ø–æ–ª—å–∑—É –¥–ª—è –º–µ–Ω—è –ø—Ä–∏–Ω–µ—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞:

https://embetronicx.com/tutorials/linux/device-drivers/procfs-in-linux/#Remove_Proc_Entry

https://devarea.com/linux-kernel-development-creating-a-proc-file-and-interfacing-with-user-space/

–ù–∞ –æ—Å–Ω–æ–≤–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏–∑ —ç—Ç–∏—Ö —Å—Ç–∞—Ç–µ–π —è —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–∞ —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤–∏–¥–µ–Ω—å–µ –º–æ–µ–≥–æ –±—É–¥—É—â–µ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ –∏ –ø—Ä–∏—Å—Ç—É–ø–∏–ª–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

<aside>
üìñ –°—Å—ã–ª–∫–∞ –Ω–∞ Github —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [https://github.com/IlsiyaNasibullina/LinuxKernelSecretsModule/tree/main](https://github.com/IlsiyaNasibullina/LinuxKernelSecretsModule/tree/main)

</aside>

–í–µ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º Github —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. 

–¢–∞–∫–∂–µ —Ö–æ—á—É –æ—Ç–º–µ—Ç–∏—Ç—å –ø–æ –ø—Ä–æ—Ü–µ—Å—Å—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–æ–≤: –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —è –Ω–∞–ø–∏—Å–∞–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞ –≤ –∫–æ–¥–µ –¥—Ä–∞–π–≤–µ—Ä–∞. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è user-space —è —Å—Ç–æ–ª–∫–Ω—É–ª–∞—Å—å —Å –ø—Ä–æ–±–ª–µ–º–æ–π, —á—Ç–æ –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –≤—ã–∑–≤–∞—Ç—å –≤ –¥—Ä–∞–π–≤–µ—Ä–µ —Ñ—É–Ω–∫—Ü–∏—é —É–¥–∞–ª–µ–Ω–∏—è. –ü–æ—ç—Ç–æ–º—É —è –ø—Ä–∏–Ω—è–ª–∞ —Ä–µ—à–µ–Ω–∏–µ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —É–¥–∞–ª–µ–Ω–∏—è –≤ –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø–∏—Å–∏. –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä–∞–π–≤–µ—Ä—É –∑–∞–ø—Ä–æ—Å —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º ‚Äúdelete:‚Äù, —Ç–æ –¥—Ä–∞–π–≤–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞, –∏–Ω–∞—á–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –µ–º—É —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä.

## –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ —è–¥—Ä–∞ —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º —è –æ–ø–∏—Ä–∞–ª–∞—Å—å –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–∞—Ç–µ–π:

https://wiki.merionet.ru/articles/poshagovoe-rukovodstvo-kak-sobrat-yadro-linux-s-nulya

https://www.cyberciti.biz/tips/compiling-linux-kernel-module.html

https://wiki.archlinux.org/title/Compile_kernel_module

–ü–µ—Ä–≤—ã–º —à–∞–≥–æ–º —è —Å–∫–∞—á–∞–ª–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —è–¥—Ä–∞ Linux. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –Ω–∞ –º–æ–µ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è 6.5.0, —è –≤—ã–±—Ä–∞–ª–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–µ—Ä—Å–∏—é 6.5.7.

![photo_2024-07-03 21.41.26.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/d3b69cc4-32a9-4f0b-b78f-6d052af7854a.png)

–î–∞–ª–µ–µ —è —Ä–∞—Å–ø–∞–∫–æ–≤–∞–ª–∞ —Ñ–∞–π–ª —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:

```bash
tar xvf linux-6.5.7.tar.xz
```

![photo_2024-07-03 21.41.28.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/94c8a2dc-4229-41d5-8a8c-4e35fcb2205a.png)

–¢–∞–∫–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É:

```bash
sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils \
																				libssl-dev bc flex libelf-dev bison
```

![photo_2024-07-03 21.41.30.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/39fa945b-6316-44b9-a20f-13e5efd943c7.png)

–ó–∞—Ç–µ–º —è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
cp -v /boot/config-$(uname -r) .config
```

![photo_2024-07-03 21.41.32.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/aad1edfe-7628-4c43-8153-8ef4fe0eb39e.png)

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–µ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å KASAN. –î–ª—è –µ–≥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —è –≤–∫–ª—é—á–∏–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –æ–ø—Ü–∏—é –≤ menuconfig. –í –º–µ–Ω—é —è –ø–µ—Ä–µ—à–ª–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:

```bash
make menuconfig
```

![photo_2024-07-03 21.41.34.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/020870f3-363b-4e49-b698-3d48980e64a8.png)

![photo_2024-07-03 21.41.36.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/7f297527-4055-4e79-a680-16c05bcaafca.png)

–°–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —è –ø–µ—Ä–µ—à–ª–∞ –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Å–≤–æ–µ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞. –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —è –ø–µ—Ä–µ—à–ª–∞ –≤ –ø–∞–ø–∫—É `drivers` –∏ —Å–æ–∑–¥–∞–ª–∞ –ø–∞–ø–∫—É `secrets` –¥–ª—è —Å–≤–æ–µ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞.

![photo_2024-07-03 21.41.38.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/49c3b6be-411d-4e28-8363-030eaff526ee.png)

–ê –∑–∞—Ç–µ–º –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª–∞ —Ç—É–¥–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥—Ä–∞–π–≤–µ—Ä–∞ –∏ Makefile.

![photo_2024-07-03 21.41.40.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/4c50ca98-38e1-4389-aa64-1a2770ff6761.png)

–ó–∞—Ç–µ–º —è –ø—Ä–∏—Å—Ç—É–ø–∏–ª–∞ –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é Kconfig —Ñ–∞–π–ª—É –¥–ª—è –¥—Ä–∞–π–≤–µ—Ä–∞. –í –Ω–µ–≥–æ —è –¥–æ–±–∞–≤–∏–ª–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏:

```bash
config SECRETS_MODULE
    tristate "Secrets Module"
    default n
    help
      A driver to store secrets.
```

–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞:

- config SECRETS_MODULE - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∏–º–µ–Ω–µ–º¬†`SECRETS_MODULE`
- tristate "Secrets Module" - —É–∫–∞–∑–∞–Ω–∏–µ, —á—Ç–æ –æ–ø—Ü–∏—è¬†`SECRETS_MODULE`¬†–º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:¬†`y`,¬†`m`, –∏–ª–∏¬†`n`.
- default n - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬†–∫–∞–∫¬†`n`
- help - —Ä–∞–∑–¥–µ–ª —Å–ø—Ä–∞–≤–∫–∏ –¥–ª—è –æ–ø—Ü–∏–∏¬†`SECRETS_MODULE`
- A driver to store secrets. - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞

![photo_2024-07-03 21.41.41.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/4d66c91c-7205-4405-9af2-019f078bcfa9.png)

–î–∞–ª–µ–µ —è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∞ Kconfig —Ñ–∞–π–ª –∏ –¥–æ–±–∞–≤–∏–ª–∞ –≤ –Ω–µ–≥–æ –ø—É—Ç—å –Ω–æ–≤–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞.

![photo_2024-07-03 21.41.44.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/99a51e2d-ebe5-4398-bced-57ef41be9460.png)

–ó–∞—Ç–µ–º —è –ø–µ—Ä–µ—à–ª–∞ –∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —è–¥—Ä–∞ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:

```bash
sudo make
```

![photo_2024-07-03 21.41.46.jpeg](INT-13%20OS%20%D0%96%D1%83%D1%80%D0%BD%D0%B0%D0%BB%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%9D%D0%B0%D1%81%D0%B8%D0%B1%D1%83%D0%BB%D0%BB%D0%B8%D0%BD%D0%B0%20%D0%98%D0%BB%D1%8C%D1%81%D0%B8%D1%8F%2077940ca679764fa1bc773da97f75ed5b/9ceb9bc5-ab7e-489a-9901-030a84d4633c.png)

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –º–æ–π –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–ø—ã—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —è–¥—Ä–∞, –≤ —ç—Ç–æ—Ç —Ä–∞–∑ —è —Å—Ç–æ–ª–∫–Ω—É–ª–∞—Å—å —Å —Ä—è–¥–æ–º –ø—Ä–æ–±–ª–µ–º. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ —Å–ª–µ–¥—É—é—â–∞—è –æ—à–∏–±–∫–∞:

```bash
arch/x86/kvm/x86.c: In function ‚Äòkvm_arch_vm_ioctl‚Äô:
arch/x86/kvm/x86.c:7099:1: error: the frame size of 1208 bytes is 
													larger than 1024 bytes [-Werror=frame-larger-than=]
 7099 | }
      | ^
cc1: all warnings being treated as errors
make[4]: *** [scripts/Makefile.build:243: arch/x86/kvm/x86.o] Error 1
make[3]: *** [scripts/Makefile.build:480: arch/x86/kvm] Error 2
make[2]: *** [scripts/Makefile.build:480: arch/x86] Error 2
make[1]: *** [/home/ily/src/linux-6.5.7/Makefile:2034: .] Error 2
make: *** [Makefile:234: __sub-make] Error 2
```

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã —è –æ–±—Ä–∞—Ç–∏–ª–∞—Å—å –∫ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º:

https://forums.debian.net/viewtopic.php?t=65980

https://stackoverflow.com/questions/9415477/werror-frame-larger-than-error

–°–ª–µ–¥—É—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º, —è –æ—Ç–∫–ª—é—á–∏–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:¬†`CONFIG_FRAME_WARN`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤–æ–∑–Ω–∏–∫–ª–∞ –µ—â–µ –æ–¥–Ω–∞ –æ—à–∏–±–∫–∞:

```bash
scripts/Makefile.build:41: drivers/Makefile: No such file or directory
make[3]: *** No rule to make target 'drivers/Makefile'.  Stop.
make[2]: *** [scripts/Makefile.build:480: drivers] Error 2
make[1]: *** [/home/ily/src/linux-6.5.7/Makefile:2034: .] Error 2
make: *** [Makefile:234: __sub-make] Error 2
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–ª–∞ –∏–∑-–∑–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä–∞–π–≤–µ—Ä–∞, —á—Ç–æ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –º–Ω–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞.

–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–∏ —à–∞–≥–∏ –±—ã–ª–∏ –±—ã:

1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è user-space –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:
`gcc -o user_space user_space.c`
2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–µ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ –≤ —è–¥—Ä–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `insmod`
3. –ó–∞–ø—É—Å–∫ user-space –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã:
`./secrets_test`
4. –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ KASAN

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–í —Ä–∞–º–∫–∞—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ –∏ —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞ –º–æ–¥—É–ª—å —è–¥—Ä–∞ Linux –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã procfs. –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–∫–ª—é—á–∞–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ procfs, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏, —á—Ç–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ Makefile, user-space –ø—Ä–æ–≥—Ä–∞–º–º—ã, Kconfig —Ñ–∞–π–ª–∞ –¥–ª—è –¥—Ä–∞–π–≤–µ—Ä–∞ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Kconfig —Ñ–∞–π–ª–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —è–¥—Ä–∞.

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∏–∑-–∑–∞ –≤–æ–∑–Ω–∏–∫—à–∏—Ö –ø—Ä–æ–±–ª–µ–º –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–Ω–µ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≤–µ—Ä—à–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ –¥–µ–¥–ª–∞–π–Ω–∞. –û–¥–Ω–∞–∫–æ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –¥–∞–ª–æ –º–Ω–µ —Ü–µ–Ω–Ω—ã–π –æ–ø—ã—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –¥—Ä–∞–π–≤–µ—Ä–æ–≤, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä–∏–ª–æ –º–æ–∏ –∑–Ω–∞–Ω–∏—è –∏ –ø–æ–∑–≤–æ–ª–∏–ª–æ –≥–ª—É–±–∂–µ –ø–æ–Ω—è—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.